<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <title>Componentes com Renderização Dinâmica</title>
    <style>
        .formTable {
           width: 600px;
           margin: 20px auto;
           border-collapse: collapse;
        }
        .formTable td {
           padding: 5px;
        }
        .leftCol {
           width: 150px;
           text-align: right;
           font-weight: bold;
        }
        .rightCol {
           width: 450px;
           text-align: left;
        }
        .formTitle {
           text-align: center;
           font-size: 24px;
           margin-bottom: 20px;
        }
    </style>
</h:head>
<h:body>
    <h:form id="frmComponentes">

        <!-- Título -->
        <h:panelGroup layout="block" styleClass="formTitle">
            <h:outputText value="Apresentação de Componentes" />
        </h:panelGroup>

        <!-- Tabela dos campos fixos -->
        <table class="formTable">
            <tr>
                <td class="leftCol">
                    <h:outputLabel for="nome" value="Nome Completo:" />
                </td>
                <td class="rightCol">
                    <p:inputText id="nome" value="#{apresentacaoBean.usuarioVO.nomeCompleto}" required="true" style="width:100%;" />
                </td>
            </tr>
            <tr>
                <td class="leftCol">
                    <h:outputLabel for="idade" value="IdaDe:" />
                </td>
                <td class="rightCol">
                    <p:inputText id="idade" value="#{apresentacaoBean.usuarioVO.idade}" required="true" style="width:100%;">
                        <f:convertNumber integerOnly="true" />
                    </p:inputText>
                </td>
            </tr>
            <tr>
                <td class="leftCol">
                    <h:outputLabel for="email" value="Email:" />
                </td>
                <td class="rightCol">
                    <p:inputText id="email" value="#{apresentacaoBean.usuarioVO.email}" required="true" style="width:100%;">
                        <f:validateRegex pattern="^[\\w\\.-]+@[\\w\\.-]+\\.\\w{2,4}$" />
                    </p:inputText>
                </td>
            </tr>
            <tr>
                <td class="leftCol">
                    <h:outputLabel for="docType" value="Documento:" />
                </td>
                <td class="rightCol">
                    <p:selectOneMenu id="docType" value="#{apresentacaoBean.usuarioVO.tipoDocumento}" required="true" style="width:100%;">
                        <!-- Valor 0: Selecione; 1: CPF; 2: CNPJ -->
                        <f:selectItem itemValue="0" itemLabel="Selecione..." noSelectionOption="true" />
                        <f:selectItem itemValue="1" itemLabel="CPF" />
                        <f:selectItem itemValue="2" itemLabel="CNPJ" />
                        <!-- Atualiza o painel dos campos dinâmicos -->
                        <f:ajax execute="@this" render="docPanel" />
                    </p:selectOneMenu>
                </td>
            </tr>
        </table>

        <!-- Painel dinâmico: sempre renderizado para que o AJAX atualize -->
        <p:outputPanel id="docPanel" layout="block">
            <!-- Campo CPF (aparece somente se o valor for 1) -->
            <p:outputPanel id="cpfPanel" layout="block" rendered="#{apresentacaoBean.usuarioVO.tipoDocumento == 1}">
                <table class="formTable">
                    <tr>
                        <td class="leftCol">
                            <h:outputLabel for="cpf" value="CPF:" />
                        </td>
                        <td class="rightCol">
                            <p:inputMask id="cpf" value="#{apresentacaoBean.usuarioVO.cpf}" required="true" style="width:100%;" mask="999.999.999-99" />
                        </td>
                    </tr>
                </table>
            </p:outputPanel>
            <!-- Campo CNPJ (aparece somente se o valor for 2) -->
            <p:outputPanel id="cnpjPanel" layout="block" rendered="#{apresentacaoBean.usuarioVO.tipoDocumento == 2}">
                <table class="formTable">
                    <tr>
                        <td class="leftCol">
                            <h:outputLabel for="cnpj" value="CNPJ:" />
                        </td>
                        <td class="rightCol">
                            <p:inputMask id="cnpj" value="#{apresentacaoBean.usuarioVO.cnpj}" required="true" style="width:100%;" mask="99.999.999/9999-99" />
                        </td>
                    </tr>
                </table>
            </p:outputPanel>
        </p:outputPanel>

        <!-- Botão centralizado -->
        <p:commandButton value="Cadastrar" action="#{apresentacaoBean.validarApresentacao}" update="msgs" style="display:block; margin:20px auto;" />

        <p:messages id="msgs" autoUpdate="true" style="width:600px; margin:10px auto;" />
    </h:form>
</h:body>
</html>